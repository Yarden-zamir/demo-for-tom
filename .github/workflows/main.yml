on:
    - push

jobs:
    test:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4.1.1

            - name: build and run server
              run: docker build . -t tom && docker run -d -p 8000:8000 tom:latest

            - name: install test requirements
              run: pip install -r test.requirements.txt
              
            - name: Run tests
              run: python test.py
    # deploy_to_stage:
    #     environment: stage
    #     steps:
    #         - run: ls